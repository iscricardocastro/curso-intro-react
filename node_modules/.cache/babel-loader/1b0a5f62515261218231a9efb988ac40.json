{"ast":null,"code":"import _toConsumableArray from\"/Users/ricardo/Documents/proyectos/reactjs/curso-intro-react/curso-intro-react/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/ricardo/Documents/proyectos/reactjs/curso-intro-react/curso-intro-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{createContext,useState}from\"react\";import{useLocalStorage}from\"./useLocalStorage\";import{confirmAlert}from'react-confirm-alert';// Import\nimport'react-confirm-alert/src/react-confirm-alert.css';// Import css\nimport{jsx as _jsx}from\"react/jsx-runtime\";var TodoContext=/*#__PURE__*/createContext();function TodoProvider(props){var _useLocalStorage=useLocalStorage('TODOS_V1',[]),todos=_useLocalStorage.item,saveTodos=_useLocalStorage.saveItem,loading=_useLocalStorage.loading,error=_useLocalStorage.error;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),openModal=_useState2[0],setOpenModal=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),searchValue=_useState4[0],setSearchValue=_useState4[1];var completedTodos=todos.filter(function(todo){return!!todo.completed;}).length;var totalTodos=todos.length;var searchedTodos=[];if(!searchValue.length>=1){searchedTodos=todos;}else{searchedTodos=todos.filter(function(todo){var todoText=todo.text.toLowerCase();var searchText=searchValue.toLowerCase();return todoText.includes(searchText);});}var completeTodo=function completeTodo(text){var todoIndex=todos.findIndex(function(todo){return todo.text===text;});var newTodos=_toConsumableArray(todos);newTodos[todoIndex].completed=true;saveTodos(newTodos);};var addTodo=function addTodo(text){console.log(text);var newTodos=_toConsumableArray(todos);newTodos.push({completed:false,text:text});saveTodos(newTodos);};var deleteTodo=function deleteTodo(text){confirmAlert({title:'¿Seguro quieres eliminar?',message:\"TODO: \".concat(text,\".\"),buttons:[{label:'Sí',onClick:function onClick(){var todoIndex=todos.findIndex(function(todo){return todo.text===text;});var newTodos=_toConsumableArray(todos);newTodos.splice(todoIndex,1);saveTodos(newTodos);}},{label:'No',onClick:function onClick(){}}]});};return/*#__PURE__*/_jsx(TodoContext.Provider,{value:{loading:loading,error:error,totalTodos:totalTodos,completedTodos:completedTodos,searchValue:searchValue,setSearchValue:setSearchValue,searchedTodos:searchedTodos,completeTodo:completeTodo,deleteTodo:deleteTodo,openModal:openModal,setOpenModal:setOpenModal,addTodo:addTodo},children:props.children});}export{TodoContext,TodoProvider};","map":{"version":3,"names":["React","createContext","useState","useLocalStorage","confirmAlert","TodoContext","TodoProvider","props","todos","item","saveTodos","saveItem","loading","error","openModal","setOpenModal","searchValue","setSearchValue","completedTodos","filter","todo","completed","length","totalTodos","searchedTodos","todoText","text","toLowerCase","searchText","includes","completeTodo","todoIndex","findIndex","newTodos","addTodo","console","log","push","deleteTodo","title","message","buttons","label","onClick","splice","children"],"sources":["/Users/ricardo/Documents/proyectos/reactjs/curso-intro-react/curso-intro-react/src/TodoContext/index.js"],"sourcesContent":["import React, {createContext, useState} from \"react\";\nimport { useLocalStorage } from \"./useLocalStorage\";\nimport { confirmAlert } from 'react-confirm-alert'; // Import\nimport 'react-confirm-alert/src/react-confirm-alert.css'; // Import css\n\nconst TodoContext = createContext();\n\nfunction TodoProvider(props){\n\n  const {item: todos, saveItem : saveTodos, loading, error} = useLocalStorage('TODOS_V1', []);\n  const [openModal, setOpenModal] = useState(false);\n  const [searchValue, setSearchValue] = useState('');\n  const completedTodos = todos.filter(todo => !!todo.completed).length;\n  const totalTodos = todos.length;\n\n  let searchedTodos = [];\n  if(!searchValue.length >= 1){\n    searchedTodos = todos;\n  }else{\n    searchedTodos = todos.filter(todo => {\n      const todoText = todo.text.toLowerCase();\n      const searchText = searchValue.toLowerCase();\n\n      return todoText.includes(searchText);\n    });\n\n  }\n\n  \n\n  const completeTodo = (text) => {\n    const todoIndex = todos.findIndex(todo => todo.text === text);\n\n    const newTodos = [...todos];\n    newTodos[todoIndex].completed = true;\n    saveTodos(newTodos);\n  };\n\n  const addTodo = (text) => {\n    console.log(text);\n    const newTodos = [...todos];\n    newTodos.push({\n      completed:false,\n      text\n    });\n    saveTodos(newTodos);\n  };\n\n  const deleteTodo = (text) => {\n\n    confirmAlert({\n      title: '¿Seguro quieres eliminar?',\n      message: `TODO: ${text}.`,\n      buttons:[\n        {\n          label: 'Sí',\n          onClick: () => {\n            const todoIndex = todos.findIndex(todo => todo.text === text);\n            const newTodos = [...todos];\n            newTodos.splice(todoIndex, 1);\n            saveTodos(newTodos)\n          }\n        },\n        {\n          label: 'No',\n          onClick: () => {}\n        }\n      ]\n    })\n  }\n\n    return (\n        \n        <TodoContext.Provider value={{ \n            loading,\n            error,\n            totalTodos,\n            completedTodos,\n            searchValue,\n            setSearchValue,\n            searchedTodos,\n            completeTodo,\n            deleteTodo,\n            openModal,\n            setOpenModal,\n            addTodo\n         }}>\n            {props.children}\n        </TodoContext.Provider>\n\n    );\n\n}\n\nexport {TodoContext, TodoProvider};\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}