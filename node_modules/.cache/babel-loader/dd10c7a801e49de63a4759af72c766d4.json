{"ast":null,"code":"import _slicedToArray from\"/Users/ricardo/Documents/proyectos/reactjs/curso-intro-react/curso-intro-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";function useLocalStorage(itemName,initialValue){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(initialValue),_useState6=_slicedToArray(_useState5,2),item=_useState6[0],setItem=_useState6[1];useEffect(function(){setTimeout(function(){try{var localStorageItem=localStorage.getItem(itemName);var parsedItem;// (!localStorageTodos) ?\nif(!localStorageItem){localStorage.setItem(itemName,JSON.stringify(initialValue));parsedItem=initialValue;}else{parsedItem=JSON.parse(localStorageItem);}setItem(parsedItem);setLoading(false);}catch(error){setError(error);}},1000);});var saveItem=function saveItem(newItem){try{var stringifiedItem=JSON.stringify(newItem);localStorage.setItem(itemName,stringifiedItem);setItem(newItem);}catch(error){setError(error);}};return{item:item,saveItem:saveItem,loading:loading,error:error};}export{useLocalStorage};","map":{"version":3,"names":["React","useState","useEffect","useLocalStorage","itemName","initialValue","loading","setLoading","error","setError","item","setItem","setTimeout","localStorageItem","localStorage","getItem","parsedItem","JSON","stringify","parse","saveItem","newItem","stringifiedItem"],"sources":["/Users/ricardo/Documents/proyectos/reactjs/curso-intro-react/curso-intro-react/src/TodoContext/useLocalStorage.js"],"sourcesContent":["import React, {useState, useEffect} from \"react\";\n\nfunction useLocalStorage(itemName, initialValue){\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(false);\n    const [item, setItem] = useState(initialValue);\n  \n    useEffect(() => {\n      setTimeout(() => {\n        try {\n          const localStorageItem = localStorage.getItem(itemName);\n          let parsedItem;\n          // (!localStorageTodos) ?\n          if(!localStorageItem){\n            localStorage.setItem(itemName,JSON.stringify(initialValue));\n            parsedItem = initialValue;\n          }else{\n            parsedItem = JSON.parse(localStorageItem);\n          }\n  \n          setItem(parsedItem);\n          setLoading(false);\n        } catch (error) {\n          setError(error);\n        }\n  \n        \n      },1000);\n    });\n  \n    const saveItem = (newItem) => {\n      try{\n        const stringifiedItem = JSON.stringify(newItem);\n        localStorage.setItem(itemName,stringifiedItem);\n        setItem(newItem);\n      }catch (error){\n        setError(error);\n      }\n    }\n  \n    return {\n      item,\n      saveItem,\n      loading,\n      error\n    };\n}\n\nexport {useLocalStorage};"],"mappings":"oKAAA,MAAOA,MAAP,EAAeC,QAAf,CAAyBC,SAAzB,KAAyC,OAAzC,CAEA,QAASC,gBAAT,CAAyBC,QAAzB,CAAmCC,YAAnC,CAAgD,CAC5C,cAA8BJ,QAAQ,CAAC,IAAD,CAAtC,wCAAOK,OAAP,eAAgBC,UAAhB,eACA,eAA0BN,QAAQ,CAAC,KAAD,CAAlC,yCAAOO,KAAP,eAAcC,QAAd,eACA,eAAwBR,QAAQ,CAACI,YAAD,CAAhC,yCAAOK,IAAP,eAAaC,OAAb,eAEAT,SAAS,CAAC,UAAM,CACdU,UAAU,CAAC,UAAM,CACf,GAAI,CACF,GAAMC,iBAAgB,CAAGC,YAAY,CAACC,OAAb,CAAqBX,QAArB,CAAzB,CACA,GAAIY,WAAJ,CACA;AACA,GAAG,CAACH,gBAAJ,CAAqB,CACnBC,YAAY,CAACH,OAAb,CAAqBP,QAArB,CAA8Ba,IAAI,CAACC,SAAL,CAAeb,YAAf,CAA9B,EACAW,UAAU,CAAGX,YAAb,CACD,CAHD,IAGK,CACHW,UAAU,CAAGC,IAAI,CAACE,KAAL,CAAWN,gBAAX,CAAb,CACD,CAEDF,OAAO,CAACK,UAAD,CAAP,CACAT,UAAU,CAAC,KAAD,CAAV,CACD,CAAC,MAAOC,KAAP,CAAc,CACdC,QAAQ,CAACD,KAAD,CAAR,CACD,CAGF,CAnBS,CAmBR,IAnBQ,CAAV,CAoBD,CArBQ,CAAT,CAuBA,GAAMY,SAAQ,CAAG,QAAXA,SAAW,CAACC,OAAD,CAAa,CAC5B,GAAG,CACD,GAAMC,gBAAe,CAAGL,IAAI,CAACC,SAAL,CAAeG,OAAf,CAAxB,CACAP,YAAY,CAACH,OAAb,CAAqBP,QAArB,CAA8BkB,eAA9B,EACAX,OAAO,CAACU,OAAD,CAAP,CACD,OAAOb,KAAP,CAAa,CACZC,QAAQ,CAACD,KAAD,CAAR,CACD,CACF,CARD,CAUA,MAAO,CACLE,IAAI,CAAJA,IADK,CAELU,QAAQ,CAARA,QAFK,CAGLd,OAAO,CAAPA,OAHK,CAILE,KAAK,CAALA,KAJK,CAAP,CAMH,CAED,OAAQL,eAAR"},"metadata":{},"sourceType":"module"}